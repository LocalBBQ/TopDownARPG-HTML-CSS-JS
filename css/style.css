* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Cinzel', Georgia, serif;
    background: #0f0b08;
    overflow: hidden;
    color: #e8dcc8;
    -webkit-font-smoothing: antialiased;
}

#game-container {
    position: relative;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}

#gameCanvas {
    display: block;
    width: 100%;
    height: 100%;
    background: #0d0a08;
    cursor: crosshair;
}

#ui-overlay {
    position: absolute;
    inset: 0;
    pointer-events: none;
    padding: 16px 16px 0 16px;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
}

#game-hud {
    display: flex;
    flex-direction: column;
    align-items: center;
    align-self: stretch;
}

#game-hud.hidden {
    display: none;
}

/* Bottom orb row - health left, stamina right (bottom corners) */
#orb-row {
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    align-self: stretch;
    padding: 0 100px 12px;
}

#orb-row .orb-wrapper:first-child {
    align-items: flex-start, 20px 0 0 0;
}

#orb-row .orb-wrapper:last-child {
    align-items: flex-end, 0 20px 0 0;
}

.orb-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.orb {
    position: relative;
    width: 120px;
    height: 120px;
    flex-shrink: 0;
    border-radius: 50%;
    overflow: hidden;
}

.orb-caption {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 6px;
    gap: 2px;
}

.orb-label {
    font-size: 14px;
    font-weight: 700;
    color: #c9a227;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
}

.orb-frame {
    position: absolute;
    inset: 0;
    border-radius: 50%;
    border: 3px solid rgba(61, 40, 23, 0.6);
    box-shadow:
        inset 0 -6px 16px rgba(0, 0, 0, 0.35),
        inset 0 2px 6px rgba(255, 255, 255, 0.06),
        0 4px 16px rgba(0, 0, 0, 0.4);
    background: radial-gradient(ellipse 60% 50% at 50% 30%, rgba(40, 28, 18, 0.35), rgba(15, 10, 6, 0.25));
    z-index: 2;
    pointer-events: none;
}

.orb-fill {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    transition: height 0.2s ease;
    z-index: 1;
}

.health-orb .orb-fill.health-fill {
    background: linear-gradient(180deg, #e04040 0%, #b02828 30%, #8b2020 60%, #5c1010 100%);
    box-shadow: inset 0 2px 0 rgba(255, 200, 200, 0.3);
}

.stamina-orb .orb-fill.stamina-fill {
    background: linear-gradient(180deg, #4a9070 0%, #2a7050 30%, #1e5038 60%, #0f2520 100%);
    box-shadow: inset 0 2px 0 rgba(200, 240, 220, 0.25);
}

.stamina-orb.stamina-pulse .orb-fill.stamina-fill {
    filter: brightness(1.25);
    box-shadow: inset 0 2px 0 rgba(200, 240, 220, 0.4), 0 0 18px rgba(100, 200, 160, 0.5);
}

.orb-text {
    font-size: 16px;
    font-weight: 700;
    color: #e0c8a0;
    font-variant-numeric: tabular-nums;
    white-space: nowrap;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.9), 0 0 8px rgba(0, 0, 0, 0.6);
}

/* Extra stats (stun, heal) - compact bar below orbs */
#stats-extra {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
    gap: 20px 40px;
    padding: 16px 36px;
    min-width: 520px;
    background: linear-gradient(180deg, rgba(44, 24, 16, 0.45) 0%, rgba(26, 16, 8, 0.5) 100%);
    border: 3px solid rgba(61, 40, 23, 0.5);
    border-radius: 8px;
    margin-bottom: 12px;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);
}

.stat-bar {
    display: flex;
    align-items: center;
    gap: 10px;
}

.stat-bar label {
    font-size: 17px;
    font-weight: 700;
    color: #c9a227;
    width: 60px;
    flex-shrink: 0;
    letter-spacing: 0.05em;
}

.bar-container {
    width: 150px;
    height: 24px;
    background: #0f0a06;
    border: 2px solid #3d2817;
    border-radius: 4px;
    overflow: hidden;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.6);
}

.bar {
    height: 100%;
    border-radius: 0;
    transition: width 0.25s ease;
}

.bar.stun {
    background: linear-gradient(180deg, #e8e8e8 0%, #c8c8c8 50%, #a0a0a0 100%);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.bar.stun-duration-bar {
    background: linear-gradient(180deg, #ffaa00 0%, #cc8800 50%, #996600 100%);
    box-shadow: inset 0 1px 0 rgba(255, 220, 150, 0.3);
}

/* Potion bottle – fill shows remaining charges */
.potion-bottle {
    position: relative;
    width: 36px;
    height: 52px;
    flex-shrink: 0;
    border-radius: 6px 6px 4px 4px;
    overflow: hidden;
    background: linear-gradient(180deg, rgba(20, 12, 8, 0.95) 0%, rgba(12, 8, 4, 0.98) 100%);
    border: 2px solid rgba(80, 50, 30, 0.7);
    box-shadow:
        inset 0 -4px 10px rgba(0, 0, 0, 0.5),
        inset 0 1px 0 rgba(120, 80, 50, 0.2),
        0 2px 6px rgba(0, 0, 0, 0.3);
}

.potion-bottle-frame {
    position: absolute;
    inset: 0;
    border-radius: 6px 6px 4px 4px;
    border: 1px solid rgba(100, 65, 40, 0.4);
    pointer-events: none;
    z-index: 2;
    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.2);
}

.potion-fill {
    position: absolute;
    bottom: 0;
    left: 2px;
    right: 2px;
    width: calc(100% - 4px);
    border-radius: 0 0 2px 2px;
    transition: height 0.25s ease;
    z-index: 1;
    background: linear-gradient(180deg, #c03030 0%, #902020 35%, #601818 70%, #381010 100%);
    box-shadow: inset 0 2px 0 rgba(255, 180, 180, 0.25);
}

.potion-bottle.drinking .potion-fill {
    transition: height 0.15s ease;
}

.stat-bar.heal-charges .heal-charges-text,
.stat-bar.heal-charges span {
    font-size: 18px;
    font-weight: 600;
    color: #b89870;
    font-variant-numeric: tabular-nums;
}

/* Inventory & Equipment screen (Tab to open) – responsive auto layout */
.inventory-screen {
    --inv-panel-width: min(44%, 460px);
    --inv-panel-min-w: 280px;
    --inv-panel-max-w: 460px;
    --inv-pad: clamp(10px, 2.5vw, 18px);
    --inv-gap: clamp(8px, 1.5vw, 16px);
    --inv-slot-min: 36px;
    --inv-slot-max: 48px;
    position: absolute;
    inset: 0;
    z-index: 100;
    display: flex;
    align-items: stretch;
    justify-content: flex-end;
    pointer-events: none;
}

.inventory-screen.hidden {
    display: none;
}

.inventory-panel {
    display: flex;
    flex-direction: column;
    width: var(--inv-panel-width);
    min-width: var(--inv-panel-min-w);
    max-width: var(--inv-panel-max-w);
    max-height: 100vh;
    margin: clamp(8px, 2vw, 16px);
    pointer-events: auto;
    background: linear-gradient(165deg, rgba(30, 22, 16, 0.98) 0%, rgba(20, 14, 10, 0.98) 50%, rgba(16, 11, 7, 0.98) 100%);
    border: 1px solid rgba(80, 55, 35, 0.85);
    border-top-color: rgba(120, 90, 60, 0.25);
    border-radius: 10px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.55), inset 0 1px 0 rgba(140, 110, 70, 0.08);
    overflow: hidden;
}

.inventory-header {
    display: flex;
    align-items: center;
    gap: var(--inv-gap);
    padding: var(--inv-pad);
    border-bottom: 1px solid rgba(61, 40, 23, 0.5);
    background: rgba(15, 10, 6, 0.5);
    flex-shrink: 0;
}

.inventory-title {
    font-size: clamp(14px, 2.2vw, 18px);
    font-weight: 700;
    color: #c9a227;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    margin: 0;
    min-width: 0;
}

.inventory-portrait-wrap {
    flex-shrink: 0;
    margin-left: auto;
}

.inventory-portrait {
    display: block;
    width: clamp(64px, 12vw, 96px);
    height: clamp(64px, 12vw, 96px);
    border-radius: 6px;
    border: 2px solid rgba(61, 40, 23, 0.6);
    background: rgba(20, 14, 10, 0.9);
    box-shadow: inset 0 0 0 1px rgba(120, 90, 60, 0.2);
}

.inventory-stats {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    align-items: flex-start;
    justify-content: space-between;
    gap: var(--inv-gap);
    padding: var(--inv-pad);
    background: linear-gradient(180deg, rgba(44, 28, 18, 0.4) 0%, rgba(26, 18, 10, 0.3) 100%);
    border-bottom: 1px solid rgba(61, 40, 23, 0.4);
    flex-shrink: 0;
}

.inventory-stats-bars {
    display: flex;
    flex-direction: column;
    gap: 8px;
    min-width: 0;
    flex: 1 1 120px;
}

.inventory-stats-right {
    display: flex;
    flex-direction: column;
    gap: 8px;
    flex-shrink: 0;
}

.inventory-stat {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.inventory-stat-with-bar {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.inventory-stat-label {
    font-size: 14px;
    font-weight: 700;
    color: #a08050;
    letter-spacing: 0.05em;
}

.inventory-stat-value {
    font-size: 15px;
    font-weight: 600;
    color: #e0c8a0;
    font-variant-numeric: tabular-nums;
}

.inventory-bar-container {
    display: flex;
    flex-direction: row;
    width: 100%;
    max-width: min(140px, 100%);
    height: clamp(14px, 2.5vw, 18px);
    background: #0f0a06;
    border: 2px solid #3d2817;
    border-radius: 3px;
    overflow: hidden;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.5);
}

.inventory-bar-fill {
    height: 100%;
    border-radius: 0;
    transition: width 0.2s ease;
}

.inventory-bar-fill.health {
    background: linear-gradient(180deg, #e04040 0%, #b02828 50%, #8b2020 100%);
    box-shadow: inset 0 1px 0 rgba(255, 200, 200, 0.25);
}

.inventory-bar-fill.stamina {
    background: linear-gradient(180deg, #4a9070 0%, #2a7050 50%, #1e5038 100%);
    box-shadow: inset 0 1px 0 rgba(200, 240, 220, 0.25);
}

.inventory-bar-fill.rally {
    background: linear-gradient(180deg, #cc9900 0%, #996600 50%, #664400 100%);
    box-shadow: inset 0 1px 0 rgba(255, 220, 150, 0.3);
}

.inventory-body {
    display: flex;
    flex: 1 1 0;
    min-height: 0;
    gap: 0;
}

.inventory-main {
    flex: 1 1 0;
    display: flex;
    flex-direction: column;
    padding: var(--inv-pad);
    min-width: 0;
    overflow: auto;
}

.inventory-grid-label {
    font-size: clamp(10px, 1.5vw, 12px);
    font-weight: 700;
    color: #8a7048;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    margin-bottom: 6px;
    flex-shrink: 0;
}

.inventory-equipment-label {
    font-size: 11px;
    font-weight: 700;
    color: #a08050;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    margin-bottom: 10px;
}

.inventory-equipment-subtitle {
    font-size: 10px;
    font-weight: 500;
    color: #6a5840;
    letter-spacing: 0.04em;
    margin-top: -6px;
    margin-bottom: 12px;
}

/* Auto layout: 6×4 grid with square cells that scale with container */
.inventory-grid {
    display: grid;
    grid-template-columns: repeat(6, minmax(0, 1fr));
    grid-template-rows: repeat(4, minmax(0, 1fr));
    gap: clamp(4px, 1vw, 8px);
    aspect-ratio: 6 / 4;
    width: 100%;
    max-width: 100%;
    min-height: 0;
}

.inventory-slot {
    width: 100%;
    height: 100%;
    min-width: 0;
    min-height: 0;
    box-sizing: border-box;
    background: rgba(15, 10, 6, 0.6);
    border: 1px solid rgba(61, 40, 23, 0.5);
    border-radius: 6px;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.5);
}

.inventory-slot:hover {
    border-color: rgba(201, 162, 39, 0.5);
    background: rgba(44, 32, 20, 0.6);
}

.inventory-equipment {
    flex: 0 1 auto;
    min-width: clamp(120px, 18vw, 172px);
    width: clamp(140px, 22vw, 172px);
    padding: var(--inv-pad);
    border-left: 1px solid rgba(61, 40, 23, 0.45);
    background: linear-gradient(90deg, rgba(18, 12, 8, 0.5) 0%, rgba(14, 10, 6, 0.35) 100%);
    display: flex;
    flex-direction: column;
    gap: 0;
    overflow: auto;
}

/* Gold in equipment sheet */
.equipment-slot-gold {
    margin-bottom: 10px;
}
.equipment-slot-gold .equipment-slot-value {
    color: #c9a227;
    font-variant-numeric: tabular-nums;
}

/* Equipment block: weapons (primary) */
.inventory-equipment-weapons {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 18px;
    padding-bottom: 14px;
    border-bottom: 1px solid rgba(61, 40, 23, 0.4);
}

.inventory-equipment-armor {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    margin-bottom: 14px;
    padding-bottom: 12px;
    border-bottom: 1px solid rgba(61, 40, 23, 0.4);
}

.inventory-armor-bag {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 6px;
}

.armor-bag-slot {
    aspect-ratio: 1;
    min-width: 0;
    min-height: 0;
    background: rgba(18, 12, 8, 0.55);
    border: 1px solid rgba(61, 40, 23, 0.45);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    color: #c9a86a;
    transition: border-color 0.15s ease, background 0.15s ease;
}

.armor-bag-slot:hover {
    border-color: rgba(201, 162, 39, 0.4);
    background: rgba(32, 24, 16, 0.6);
}

.equipment-slot {
    display: flex;
    flex-direction: column;
    gap: 5px;
    padding: 10px 12px;
    background: rgba(18, 12, 8, 0.55);
    border: 1px solid rgba(61, 40, 23, 0.45);
    border-radius: 6px;
    box-shadow: inset 0 1px 0 rgba(0, 0, 0, 0.3);
    transition: border-color 0.15s ease, background 0.15s ease, transform 0.15s ease;
}

.equipment-slot:hover {
    border-color: rgba(201, 162, 39, 0.4);
    background: rgba(32, 24, 16, 0.6);
}

.equipment-slot-primary {
    border-color: rgba(61, 40, 23, 0.55);
    background: rgba(22, 16, 10, 0.6);
}

.equipment-slot-primary:hover {
    border-color: rgba(201, 162, 39, 0.5);
    transform: translateY(-1px);
}

.equipment-slot.equipped {
    border-color: rgba(201, 162, 39, 0.5);
    background: rgba(201, 162, 39, 0.08);
    box-shadow: inset 0 1px 0 rgba(201, 162, 39, 0.06), 0 0 0 1px rgba(201, 162, 39, 0.15);
}

.equipment-slot-label {
    font-size: 10px;
    font-weight: 700;
    color: #8a7048;
    letter-spacing: 0.06em;
    text-transform: uppercase;
}

.equipment-slot-primary .equipment-slot-label {
    color: #a08050;
}

.equipment-slot-value {
    font-size: 13px;
    font-weight: 600;
    color: #c9a86a;
    letter-spacing: 0.02em;
}

.equipment-slot-value.empty {
    color: #5a4a38;
    font-weight: 500;
}

/* Locked / coming-soon slots */
.equipment-slot-locked {
    opacity: 0.65;
    pointer-events: none;
    border-style: dashed;
}

.equipment-slot-locked .equipment-slot-value {
    color: #4a3a28;
    font-size: 11px;
    font-style: italic;
}

/* Equipment chest overlay (hub: E at chest) */
.equipment-chest-overlay {
    position: absolute;
    inset: 0;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: auto;
    background: rgba(10, 8, 6, 0.75);
}

.equipment-chest-overlay.hidden {
    display: none;
    pointer-events: none;
}

.equipment-chest-panel {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    padding: 24px 28px 28px;
    min-width: 280px;
    background: linear-gradient(180deg, rgba(28, 20, 14, 0.98) 0%, rgba(18, 12, 8, 0.98) 100%);
    border: 2px solid rgba(61, 40, 23, 0.7);
    border-radius: 8px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6), inset 0 1px 0 rgba(120, 90, 60, 0.15);
}

.equipment-chest-title {
    font-size: 18px;
    font-weight: 700;
    color: #c9a227;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    margin: 0;
}

.equipment-chest-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
    max-width: 100%;
}

.equipment-chest-cell {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}

.equipment-chest-slot-caption {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
    text-align: center;
    font-size: 11px;
    color: #b8a080;
    line-height: 1.2;
}

.equipment-chest-slot-name {
    font-weight: 600;
    color: #e0c8a0;
}

.equipment-chest-slot-stats {
    font-size: 10px;
    color: #887866;
}

.equipment-chest-slot {
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 64px;
    min-height: 52px;
    padding: 8px;
    background: rgba(15, 10, 6, 0.6);
    border: 2px solid rgba(61, 40, 23, 0.5);
    border-radius: 4px;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.5);
    font-size: 22px;
    font-weight: 600;
    color: #e0c8a0;
    text-align: center;
    cursor: grab;
    user-select: none;
}

.equipment-chest-slot:active {
    cursor: grabbing;
}

.equipment-chest-slot:hover {
    border-color: rgba(201, 162, 39, 0.5);
    background: rgba(44, 32, 20, 0.6);
}

.equipment-chest-slot.equipped {
    border-color: rgba(201, 162, 39, 0.8);
    background: rgba(201, 162, 39, 0.15);
    color: #e8dcc8;
}

.equipment-chest-slot.drag-over {
    border-color: rgba(201, 162, 39, 0.8);
    background: rgba(201, 162, 39, 0.12);
}

.equipment-chest-equipment {
    display: flex;
    gap: 14px;
    width: 100%;
    justify-content: center;
    padding: 14px 0 4px;
    border-top: 1px solid rgba(61, 40, 23, 0.4);
    margin-top: 4px;
}

.equipment-chest-equipment .equipment-slot {
    min-width: 110px;
}

.equipment-drop-target {
    min-width: 100px;
    min-height: 48px;
}

.equipment-drop-target.drag-over {
    border-color: rgba(201, 162, 39, 0.75);
    background: rgba(201, 162, 39, 0.14);
    box-shadow: 0 0 0 2px rgba(201, 162, 39, 0.2);
}

.inventory-slot[data-weapon-key] {
    cursor: grab;
    user-select: none;
    font-size: 22px;
    font-weight: 600;
    color: #e0c8a0;
}

.inventory-slot.drag-over {
    border-color: rgba(201, 162, 39, 0.8);
    background: rgba(201, 162, 39, 0.12);
}

.inventory-slot[data-weapon-key]:active {
    cursor: grabbing;
}

@media (max-width: 480px) {
    .inventory-screen {
        justify-content: center;
    }
    .inventory-panel {
        width: calc(100vw - 16px);
        min-width: 0;
        max-width: 100%;
    }
    .inventory-body {
        flex-direction: column;
    }
    .inventory-equipment {
        flex-direction: row;
        flex-wrap: wrap;
        width: 100%;
        min-width: 0;
        border-left: none;
        border-top: 1px solid rgba(61, 40, 23, 0.45);
        justify-content: flex-start;
        gap: 8px;
    }
    .inventory-equipment-weapons {
        flex-direction: row;
        margin-bottom: 12px;
        padding-bottom: 12px;
        width: 100%;
    }
}

.equipment-chest-back {
    padding: 10px 24px;
    font-family: inherit;
    font-size: 14px;
    font-weight: 600;
    color: #a08060;
    background: #1a1008;
    border: 2px solid #4a3020;
    border-radius: 4px;
    cursor: pointer;
}

.equipment-chest-back:hover {
    color: #c9a86a;
    border-color: #6a4030;
    background: #241810;
}

/* Same styles for dist/index.html which uses weapon-chest-* IDs/classes */
.weapon-chest-overlay {
    position: absolute;
    inset: 0;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: auto;
    background: rgba(10, 8, 6, 0.75);
}

.weapon-chest-overlay.hidden {
    display: none;
    pointer-events: none;
}

.weapon-chest-panel {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    padding: 24px 28px 28px;
    min-width: 280px;
    background: linear-gradient(180deg, rgba(28, 20, 14, 0.98) 0%, rgba(18, 12, 8, 0.98) 100%);
    border: 2px solid rgba(61, 40, 23, 0.7);
    border-radius: 8px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6), inset 0 1px 0 rgba(120, 90, 60, 0.15);
}

.weapon-chest-title {
    font-size: 18px;
    font-weight: 700;
    color: #c9a227;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    margin: 0;
}

.weapon-chest-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
    max-width: 100%;
}

.weapon-chest-equipment {
    display: flex;
    gap: 14px;
    width: 100%;
    justify-content: center;
    padding: 14px 0 4px;
    border-top: 1px solid rgba(61, 40, 23, 0.4);
    margin-top: 4px;
}

.weapon-chest-equipment .equipment-slot {
    min-width: 110px;
}

.weapon-chest-back {
    padding: 10px 24px;
    font-family: inherit;
    font-size: 14px;
    font-weight: 600;
    color: #a08060;
    background: #1a1008;
    border: 2px solid #4a3020;
    border-radius: 4px;
    cursor: pointer;
}

.weapon-chest-back:hover {
    color: #c9a86a;
    border-color: #6a4030;
    background: #241810;
}

